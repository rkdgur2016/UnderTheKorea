import{_ as B,r as d,a as $,b as D,u as H,w as L,d as l,e,t as a,F as _,f as p,g as P,h as T,o as n,i as g,n as U}from"./index-Bq1crDct.js";const q={class:"bg-slate-50 min-h-screen"},A={class:"bg-white border-b border-slate-200 sticky top-0 z-10"},F={class:"max-w-7xl mx-auto px-4 lg:px-8"},I={class:"py-4"},N={class:"text-2xl font-bold text-slate-800"},R={class:"text-sm text-slate-500 mt-1"},E={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},S={key:0,class:"flex justify-center items-center py-20"},Y={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md"},G={key:2,class:"text-center py-20"},J={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},K=["onClick"],O={class:"relative aspect-[16/9] bg-slate-100 overflow-hidden"},Q=["src","alt"],W=["src","alt"],X={key:2,class:"w-full h-full flex items-center justify-center bg-slate-200"},Z={key:3,class:"absolute top-2 right-2 bg-red-600 text-white p-1 rounded-md"},ee={class:"absolute bottom-2 left-2 bg-slate-800/70 text-white text-xs px-2 py-1 rounded-md backdrop-blur-sm"},te={class:"p-4"},se={class:"font-medium text-lg text-slate-800 line-clamp-2"},oe={class:"mt-2 text-sm text-slate-600 line-clamp-2"},le={key:0,class:"mt-3 bg-slate-50 p-3 rounded-md"},ne={class:"flex justify-between text-xs mb-1"},re={class:"text-slate-700"},ae={class:"font-medium text-slate-800"},ie={class:"h-2 bg-slate-200 rounded-full overflow-hidden"},de={class:"mt-4 flex items-center justify-between text-xs text-slate-500"},ce={class:"flex items-center space-x-3"},ue={class:"flex items-center"},he={class:"flex items-center"},me={class:"flex items-center"},ve={__name:"PostView",emits:["open-detail"],setup(fe,{emit:b}){const x=H();T();const c=d([]),m=d(!1),u=d(null),v=d("");d(!1),d(null),d(null);const w=b,y=o=>{w("open-detail",o)},k=o=>{if(!o)return"";const s=new Date(o),r=Math.floor((new Date-s)/(1e3*60));if(r<1)return"방금 전";if(r<60)return`${r}분 전`;const i=Math.floor(r/60);if(i<24)return`${i}시간 전`;const h=Math.floor(i/24);if(h<7)return`${h}일 전`;const j=s.getFullYear(),V=s.getMonth()+1,z=s.getDate();return`${j}년 ${V}월 ${z}일`},f=async o=>{m.value=!0,u.value=null,v.value=o;try{const s=await P.get("/post/loadPosts",{params:{category:o}});c.value=s.data.map(t=>{const r=t.videoUrl?t.videoUrl.split("?")[0]:"",i=r?"https://img.youtube.com/vi/"+r+"/hqdefault.jpg":"",h=t.votes?t.votes:Math.random()>.7?[{text:"찬성",count:Math.floor(Math.random()*100),percentage:Math.floor(Math.random()*100)},{text:"반대",count:Math.floor(Math.random()*100),percentage:100-Math.floor(Math.random()*100)}]:null;return{id:t.postId,category:t.category,time:k(t.createdAt),title:t.title,youtube:t.videoUrl,youtubeTumbnail:i,img:t.imageUrl,body:t.content,likeCount:t.likeCount||0,comments:t.comments||0,viewcount:t.viewCount||0,votes:h}}),console.log("게시물 데이터:",c.value)}catch(s){console.error("게시물 로드 중 오류 발생:",s),u.value="게시물을 불러오는데 실패했습니다. 서버 상태를 확인해주세요."}finally{m.value=!1}},M=$(()=>{switch(v.value){case"철학":return"인간과 세계에 대한 깊이 있는 사유와 토론";case"정치":return"대한민국의 정치 현안과 미래 방향에 대한 논의";case"경제":return"경제 정책과 시장 동향에 대한 분석과 전망";case"사회문제":return"우리 사회가 직면한 다양한 문제들에 대한 고찰";case"광장":return"자유로운 의견 교환과 토론의 장";case"좌우명":return"삶의 방향을 제시하는 가치관과 원칙";default:return"다양한 주제에 대한 의견을 나누는 공간"}}),C=o=>{const s=["#4f46e5","#0ea5e9","#10b981","#f59e0b","#ef4444"];return s[o%s.length]};return D(()=>{const o=x.query.category||"철학";f(o)}),L(()=>x.query.category,(o,s)=>{o&&o!==s?f(o):!o&&s&&f("철학")},{immediate:!0}),(o,s)=>(n(),l("div",q,[e("div",A,[e("div",F,[e("div",I,[e("h1",N,a(v.value),1),e("p",R,a(M.value),1)])])]),e("div",E,[m.value?(n(),l("div",S,s[0]||(s[0]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-slate-800"},null,-1)]))):u.value?(n(),l("div",Y,a(u.value),1)):c.value.length===0?(n(),l("div",G,s[1]||(s[1]=[e("svg",{class:"mx-auto h-12 w-12 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-slate-900"},"게시물이 없습니다",-1),e("p",{class:"mt-1 text-sm text-slate-500"},"이 카테고리에 첫 번째 게시물을 작성해보세요.",-1)]))):(n(),l("div",J,[(n(!0),l(_,null,p(c.value,t=>(n(),l("div",{key:t.id,class:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:r=>y(t)},[e("div",O,[t.img?(n(),l("img",{key:0,src:t.img,alt:t.title,class:"w-full h-full object-cover"},null,8,Q)):t.youtubeTumbnail?(n(),l("img",{key:1,src:t.youtubeTumbnail,alt:t.title,class:"w-full h-full object-cover"},null,8,W)):(n(),l("div",X,s[2]||(s[2]=[e("svg",{class:"h-12 w-12 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.587a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]))),t.youtube?(n(),l("div",Z,s[3]||(s[3]=[e("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})],-1)]))):g("",!0),e("div",ee,a(t.category),1)]),e("div",te,[e("h3",se,a(t.title),1),e("p",oe,a(t.body),1),t.votes&&t.votes.length>0?(n(),l("div",le,[s[4]||(s[4]=e("p",{class:"text-xs font-medium text-slate-700 mb-2"},"투표 결과",-1)),(n(!0),l(_,null,p(t.votes,(r,i)=>(n(),l("div",{key:i,class:"mb-2"},[e("div",ne,[e("span",re,a(r.text),1),e("span",ae,a(r.percentage)+"%",1)]),e("div",ie,[e("div",{class:"h-full rounded-full",style:U({width:`${r.percentage}%`,backgroundColor:C(i)})},null,4)])]))),128))])):g("",!0),e("div",de,[e("span",null,a(t.time),1),e("div",ce,[e("div",ue,[s[5]||(s[5]=e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),e("span",null,a(t.viewcount),1)]),e("div",he,[s[6]||(s[6]=e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})],-1)),e("span",null,a(t.likeCount),1)]),e("div",me,[s[7]||(s[7]=e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 002-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,a(t.comments),1)])])])])],8,K))),128))]))])]))}},_e=B(ve,[["__scopeId","data-v-f9c4cfcf"]]);export{_e as P};
