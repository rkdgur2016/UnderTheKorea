import{_ as N,r as d,a as q,w as A,b as S,d as R,e as l,o as n,f as e,t as i,g as Y,h as b,F as k,i as M,n as G,u as J,j as K,k as Q}from"./index-C8I4DoQr.js";const W={class:"bg-slate-50 min-h-screen"},X={class:"bg-white border-b border-slate-200 sticky top-0 z-10"},Z={class:"max-w-7xl mx-auto px-4 lg:px-8 py-3"},O={class:"flex justify-between items-center mb-2"},ee={class:"text-xl font-bold text-slate-800"},te={class:"flex flex-col sm:flex-row justify-end items-center gap-3"},se={class:"text-sm text-slate-500 mt-0.5 sm:mr-auto"},oe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},le={key:0,class:"flex justify-center items-center py-20"},ne={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md"},ae={key:2,class:"text-center py-20"},re={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ie=["onClick"],de={class:"relative aspect-[16/9] bg-slate-100 overflow-hidden"},ce=["src","alt"],ue=["src","alt"],ve=["src","alt"],he={key:3,class:"w-full h-full flex items-center justify-center bg-slate-200"},me={key:4,class:"absolute top-2 right-2 bg-red-600 text-white p-1 rounded-md"},fe={class:"absolute bottom-2 left-2 bg-slate-800/70 text-white text-xs px-2 py-1 rounded-md backdrop-blur-sm"},ge={class:"p-4"},xe={class:"font-medium text-lg text-slate-800 line-clamp-2"},pe={class:"mt-2 text-sm text-slate-600 line-clamp-2 white-space:pre-line"},we={key:0,class:"mt-3 bg-slate-50 p-3 rounded-md"},be={class:"flex justify-between text-xs mb-1"},ye={class:"text-slate-700"},_e={class:"font-medium text-slate-800"},ke={class:"h-2 bg-slate-200 rounded-full overflow-hidden"},Me={class:"mt-4 flex items-center justify-between text-xs text-slate-500"},Ce={class:"flex items-center space-x-3"},je={class:"flex items-center"},Te={class:"flex items-center"},Be={class:"flex items-center"},Ve={key:4,class:"flex justify-center items-center py-8"},ze={key:5,class:"text-center text-slate-500 py-8"},C=10,Le={__name:"PostView",emits:["open-detail"],setup(Pe,{emit:j}){const T=Q(),B=J(),u=d([]),V=d(!1),x=d(null),p=d("");d(!1),d(null),d(null);const z=j,L=a=>{z("open-detail",a)},P=()=>{B.push({name:"PostCreate"})},$=a=>{if(!a)return"";const t=new Date(a),r=Math.floor((new Date-t)/(1e3*60));if(r<1)return"방금 전";if(r<60)return`${r}분 전`;const c=Math.floor(r/60);if(c<24)return`${c}시간 전`;const h=Math.floor(c/24);if(h<7)return`${h}일 전`;const o=t.getFullYear(),f=t.getMonth()+1,g=t.getDate();return`${o}년 ${f}월 ${g}일`},w=d(0),m=d(!1),v=d(!0),y=async(a,t,s,r=!1)=>{m.value=!0,r||(x.value=null),p.value=a;try{const h=(await K.get("/post/loadPosts",{params:{category:a,pageNo:t}})).data.map(o=>{const f=o.videoUrl?o.videoUrl.split("=")[1]:"",g=o.shortUrl?o.shortUrl.split("/").pop():"",I=f?"https://img.youtube.com/vi/"+f+"/hqdefault.jpg":"",E=g?`https://i.ytimg.com/vi/${g}/hqdefault.jpg`:"",F=o.votes?o.votes:Math.random()>.7?[{text:"찬성",count:Math.floor(Math.random()*100),percentage:Math.floor(Math.random()*100)},{text:"반대",count:Math.floor(Math.random()*100),percentage:100-Math.floor(Math.random()*100)}]:null;return{id:o.postId,category:o.category,time:$(o.createdAt),title:o.title,youtube:o.videoUrl,youtubeId:f,youtubeTumbnail:I,shortsId:g,shortsThumbnail:E,img:o.imageUrl,body:o.content,likeCount:o.likeCount||0,comments:o.comments||0,viewcount:o.viewCount||0,votes:F}});r?u.value=[...u.value,...h]:u.value=h,w.value=t+h.length,v.value=h.length===s,console.log("게시물 데이터:",u.value)}catch(c){console.error("게시물 로드 중 오류 발생:",c),x.value="게시물을 불러오는데 실패했습니다. 서버 상태를 확인해주세요.",v.value=!1}finally{m.value=!1}},H=()=>{m.value||!v.value||y(p.value,w.value,C,!0)},_=()=>{const{scrollTop:a,scrollHeight:t,clientHeight:s}=document.documentElement;a+s>=t-100&&v.value&&H()},U=q(()=>{switch(p.value){case"철학":return"인간과 세계에 대한 깊이 있는 사유와 토론";case"정치":return"대한민국의 정치 현안과 미래 방향에 대한 논의";case"경제":return"경제 정책과 시장 동향에 대한 분석과 전망";case"사회":return"우리 사회가 직면한 다양한 문제들에 대한 고찰";case"광장":return"자유로운 의견 교환과 토론의 장";case"좌우명":return"삶의 방향을 제시하는 가치관과 원칙";default:return"다양한 주제에 대한 의견을 나누는 공간"}}),D=a=>{const t=["#4f46e5","#0ea5e9","#10b981","#f59e0b","#ef4444"];return t[a%t.length]};return A(()=>T.query.category,a=>{const t=a||"철학";w.value=0,v.value=!0,y(t,w.value,C,!1)},{immediate:!0}),S(()=>{window.addEventListener("scroll",_)}),R(()=>{window.removeEventListener("scroll",_)}),(a,t)=>(n(),l("div",W,[e("div",X,[e("div",Z,[e("div",O,[e("h1",ee,i(p.value),1),e("button",{onClick:P,class:"flex-shrink-0 bg-gray-600 hover:bg-gray-700 text-white px-5 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg"}," 게시물 등록 ")]),e("div",te,[e("p",se,i(U.value),1),t[0]||(t[0]=Y('<div class="relative w-full sm:w-1/3 md:w-1/4 lg:w-1/5" data-v-312575e0><input type="text" placeholder="검색어를 입력하세요..." class="w-full pl-9 pr-3 py-1.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-700 text-sm" data-v-312575e0><svg class="absolute left-2.5 top-1/2 transform -translate-y-1/2 text-slate-400" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-312575e0><circle cx="11" cy="11" r="8" data-v-312575e0></circle><line x1="21" y1="21" x2="16.65" y2="16.65" data-v-312575e0></line></svg></div><div class="relative w-full sm:w-1/6 md:w-1/8 lg:w-1/12" data-v-312575e0><select class="block appearance-none w-full bg-white border border-slate-300 text-slate-700 py-1.5 px-3 pr-7 rounded-lg leading-tight focus:outline-none focus:bg-white focus:border-blue-500 text-sm" data-v-312575e0><option data-v-312575e0>최신순</option><option data-v-312575e0>인기순</option><option data-v-312575e0>오래된순</option></select><div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-1.5 text-slate-700" data-v-312575e0><svg class="fill-current h-3.5 w-3.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" data-v-312575e0><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 6.757 7.586 5.343 9z" data-v-312575e0></path></svg></div></div>',2))])])]),e("div",oe,[V.value?(n(),l("div",le,t[1]||(t[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-slate-800"},null,-1)]))):x.value?(n(),l("div",ne,i(x.value),1)):u.value.length===0?(n(),l("div",ae,t[2]||(t[2]=[e("svg",{class:"mx-auto h-12 w-12 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-slate-900"}," 게시물이 없습니다 ",-1),e("p",{class:"mt-1 text-sm text-slate-500"}," 이 카테고리에 첫 번째 게시물을 작성해보세요. ",-1)]))):(n(),l("div",re,[(n(!0),l(k,null,M(u.value,s=>(n(),l("div",{key:s.id,class:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:r=>L(s)},[e("div",de,[s.img?(n(),l("img",{key:0,src:s.img,alt:s.title,class:"w-full h-full object-cover"},null,8,ce)):s.shortsThumbnail?(n(),l("img",{key:1,src:s.shortsThumbnail,alt:s.title,class:"w-full h-full object-cover"},null,8,ue)):s.youtubeTumbnail?(n(),l("img",{key:2,src:s.youtubeTumbnail,alt:s.title,class:"w-full h-full object-cover"},null,8,ve)):(n(),l("div",he,t[3]||(t[3]=[e("svg",{class:"h-12 w-12 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.587a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]))),s.youtube||s.shortUrl?(n(),l("div",me,t[4]||(t[4]=[e("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})],-1)]))):b("",!0),e("div",fe,i(s.category),1)]),e("div",ge,[e("h3",xe,i(s.title),1),e("p",pe,i(s.body),1),s.votes&&s.votes.length>0?(n(),l("div",we,[t[5]||(t[5]=e("p",{class:"text-xs font-medium text-slate-700 mb-2"},"투표 결과",-1)),(n(!0),l(k,null,M(s.votes,(r,c)=>(n(),l("div",{key:c,class:"mb-2"},[e("div",be,[e("span",ye,i(r.text),1),e("span",_e,i(r.percentage)+"%",1)]),e("div",ke,[e("div",{class:"h-full rounded-full",style:G({width:`${r.percentage}%`,backgroundColor:D(c)})},null,4)])]))),128))])):b("",!0),e("div",Me,[e("span",null,i(s.time),1),e("div",Ce,[e("div",je,[t[6]||(t[6]=e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),e("span",null,i(s.viewcount),1)]),e("div",Te,[t[7]||(t[7]=e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})],-1)),e("span",null,i(s.likeCount),1)]),e("div",Be,[t[8]||(t[8]=e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 002-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,i(s.comments),1)])])])])],8,ie))),128))])),m.value&&v.value?(n(),l("div",Ve,t[9]||(t[9]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-slate-800"},null,-1)]))):b("",!0),!v.value&&u.value.length>0&&!m.value?(n(),l("div",ze," 더 이상 게시물이 없습니다. ")):b("",!0)])]))}},He=N(Le,[["__scopeId","data-v-312575e0"]]);export{He as P};
