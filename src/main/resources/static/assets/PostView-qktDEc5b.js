import{_ as H,r,a as I,w as E,b as F,d as N,e as l,o as a,f as e,t as i,g as q,h as b,F as A,i as R,u as S,j as Y,k as G}from"./index-0DqxlScp.js";const J={class:"bg-slate-50 min-h-screen"},K={class:"bg-white border-b border-slate-200 sticky top-0 z-10"},Q={class:"max-w-7xl mx-auto px-4 lg:px-8 py-3"},W={class:"flex justify-between items-center mb-2"},X={class:"text-xl font-bold text-slate-800"},Z={class:"flex flex-col sm:flex-row justify-end items-center gap-3"},O={class:"text-sm text-slate-500 mt-0.5 sm:mr-auto"},ee={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},te={key:0,class:"flex justify-center items-center py-20"},se={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md"},oe={key:2,class:"text-center py-20"},le={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ae=["onClick"],ne={class:"relative aspect-[16/9] bg-slate-100 overflow-hidden"},re=["src","alt"],ie=["src","alt"],ce=["src","alt"],de={key:3,class:"w-full h-full flex items-center justify-center bg-slate-200"},ue={key:4,class:"absolute top-2 right-2 bg-red-600 text-white p-1 rounded-md"},ve={class:"absolute bottom-2 left-2 bg-slate-800/70 text-white text-xs px-2 py-1 rounded-md backdrop-blur-sm"},he={class:"p-4"},me={class:"font-medium text-lg text-slate-800 line-clamp-2"},fe={class:"mt-2 text-sm text-slate-600 line-clamp-2 white-space:pre-line"},pe={class:"mt-4 flex items-center justify-between text-xs text-slate-500"},ge={class:"flex items-center space-x-3"},we={class:"flex items-center"},xe={class:"flex items-center"},be={key:4,class:"flex justify-center items-center py-8"},ye={key:5,class:"text-center text-slate-500 py-8"},k=10,_e={__name:"PostView",emits:["open-detail"],setup(ke,{emit:M}){const j=G(),C=S(),d=r([]),T=r(!1),g=r(null),w=r("");r(!1),r(null),r(null);const B=M,L=n=>{B("open-detail",n)},P=()=>{C.push({name:"PostCreate"})},z=n=>{if(!n)return"";const t=new Date(n),c=Math.floor((new Date-t)/(1e3*60));if(c<1)return"방금 전";if(c<60)return`${c}분 전`;const h=Math.floor(c/60);if(h<24)return`${h}시간 전`;const v=Math.floor(h/24);if(v<7)return`${v}일 전`;const o=t.getFullYear(),f=t.getMonth()+1,p=t.getDate();return`${o}년 ${f}월 ${p}일`},x=r(0),m=r(!1),u=r(!0),y=async(n,t,s,c=!1)=>{m.value=!0,c||(g.value=null),w.value=n;try{const v=(await Y.get("/post/loadPosts",{params:{category:n,pageNo:t}})).data.map(o=>{const f=o.videoUrl?o.videoUrl.split("=")[1]:"",p=o.shortUrl?o.shortUrl.split("/").pop():"",$=f?"https://img.youtube.com/vi/"+f+"/hqdefault.jpg":"",D=p?`https://i.ytimg.com/vi/${p}/hqdefault.jpg`:"";return{id:o.postId,category:o.category,time:z(o.createdAt),title:o.title,youtube:o.videoUrl,youtubeId:f,youtubeTumbnail:$,shortsId:p,shortsThumbnail:D,img:o.imageUrl,body:o.content,likeCount:o.likeCount||0,comments:o.comments||0,viewcount:o.viewCount||0}});c?d.value=[...d.value,...v]:d.value=v,x.value=t+v.length,u.value=v.length===s,console.log("게시물 데이터:",d.value)}catch(h){console.error("게시물 로드 중 오류 발생:",h),g.value="게시물을 불러오는데 실패했습니다. 서버 상태를 확인해주세요.",u.value=!1}finally{m.value=!1}},U=()=>{m.value||!u.value||y(w.value,x.value,k,!0)},_=()=>{const{scrollTop:n,scrollHeight:t,clientHeight:s}=document.documentElement;n+s>=t-100&&u.value&&U()},V=I(()=>{switch(w.value){case"철학":return"인간과 세계에 대한 깊이 있는 사유와 토론";case"정치":return"대한민국의 정치 현안과 미래 방향에 대한 논의";case"경제":return"경제 정책과 시장 동향에 대한 분석과 전망";case"사회":return"우리 사회가 직면한 다양한 문제들에 대한 고찰";case"광장":return"자유로운 의견 교환과 토론의 장";case"좌우명":return"삶의 방향을 제시하는 가치관과 원칙";default:return"다양한 주제에 대한 의견을 나누는 공간"}});return E(()=>j.query.category,n=>{const t=n||"철학";x.value=0,u.value=!0,y(t,x.value,k,!1)},{immediate:!0}),F(()=>{window.addEventListener("scroll",_)}),N(()=>{window.removeEventListener("scroll",_)}),(n,t)=>(a(),l("div",J,[e("div",K,[e("div",Q,[e("div",W,[e("h1",X,i(w.value),1),e("button",{onClick:P,class:"flex-shrink-0 bg-gray-600 hover:bg-gray-700 text-white px-5 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg"}," 게시물 등록 ")]),e("div",Z,[e("p",O,i(V.value),1),t[0]||(t[0]=q('<div class="relative w-full sm:w-1/3 md:w-1/4 lg:w-1/5" data-v-c384cc6e><input type="text" placeholder="검색어를 입력하세요..." class="w-full pl-9 pr-3 py-1.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-700 text-sm" data-v-c384cc6e><svg class="absolute left-2.5 top-1/2 transform -translate-y-1/2 text-slate-400" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-c384cc6e><circle cx="11" cy="11" r="8" data-v-c384cc6e></circle><line x1="21" y1="21" x2="16.65" y2="16.65" data-v-c384cc6e></line></svg></div><div class="relative w-full sm:w-1/6 md:w-1/8 lg:w-1/12" data-v-c384cc6e><select class="block appearance-none w-full bg-white border border-slate-300 text-slate-700 py-1.5 px-3 pr-7 rounded-lg leading-tight focus:outline-none focus:bg-white focus:border-blue-500 text-sm" data-v-c384cc6e><option data-v-c384cc6e>최신순</option><option data-v-c384cc6e>인기순</option><option data-v-c384cc6e>오래된순</option></select><div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-1.5 text-slate-700" data-v-c384cc6e><svg class="fill-current h-3.5 w-3.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" data-v-c384cc6e><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 6.757 7.586 5.343 9z" data-v-c384cc6e></path></svg></div></div>',2))])])]),e("div",ee,[T.value?(a(),l("div",te,t[1]||(t[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-slate-800"},null,-1)]))):g.value?(a(),l("div",se,i(g.value),1)):d.value.length===0?(a(),l("div",oe,t[2]||(t[2]=[e("svg",{class:"mx-auto h-12 w-12 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-slate-900"}," 게시물이 없습니다 ",-1),e("p",{class:"mt-1 text-sm text-slate-500"}," 이 카테고리에 첫 번째 게시물을 작성해보세요. ",-1)]))):(a(),l("div",le,[(a(!0),l(A,null,R(d.value,s=>(a(),l("div",{key:s.id,class:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:c=>L(s)},[e("div",ne,[s.img?(a(),l("img",{key:0,src:s.img,alt:s.title,class:"w-full h-full object-cover"},null,8,re)):s.shortsThumbnail?(a(),l("img",{key:1,src:s.shortsThumbnail,alt:s.title,class:"w-full h-full object-cover"},null,8,ie)):s.youtubeTumbnail?(a(),l("img",{key:2,src:s.youtubeTumbnail,alt:s.title,class:"w-full h-full object-cover"},null,8,ce)):(a(),l("div",de,t[3]||(t[3]=[e("svg",{class:"h-12 w-12 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.587a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]))),s.youtube||s.shortUrl?(a(),l("div",ue,t[4]||(t[4]=[e("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})],-1)]))):b("",!0),e("div",ve,i(s.category),1)]),e("div",he,[e("h3",me,i(s.title),1),e("p",fe,i(s.body),1),e("div",pe,[e("span",null,i(s.time),1),e("div",ge,[e("div",we,[t[5]||(t[5]=e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),e("span",null,i(s.viewcount),1)]),e("div",xe,[t[6]||(t[6]=e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})],-1)),e("span",null,i(s.likeCount),1)])])])])],8,ae))),128))])),m.value&&u.value?(a(),l("div",be,t[7]||(t[7]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-slate-800"},null,-1)]))):b("",!0),!u.value&&d.value.length>0&&!m.value?(a(),l("div",ye," 더 이상 게시물이 없습니다. ")):b("",!0)])]))}},je=H(_e,[["__scopeId","data-v-c384cc6e"]]);export{je as P};
