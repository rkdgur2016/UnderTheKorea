import{_,r as w,g as v,a as i,b as o,i as u,d as p,v as f,t as d,n as b,w as P,u as x,o as n,k}from"./index-D7mgjg9N.js";const h={class:"signup-container"},V={class:"form-group"},q={key:0,class:"error-message"},S={class:"form-group"},U={key:0,class:"error-message"},M={class:"form-group"},B={key:0,class:"error-message"},E={class:"form-group"},R={key:0,class:"error-message"},T={class:"form-group"},C={key:0,class:"error-message"},D=["disabled"],N={__name:"RegisterPage",setup(j){const c=x(),s=w({userId:"",password:"",confirmPassword:"",username:"",email:""}),a=w({userId:"",password:"",confirmPassword:"",username:"",email:""}),g=v(!1),l=v(""),m=v(!1),y=()=>{let r=!0;return Object.keys(a).forEach(e=>a[e]=""),s.userId?(s.userId.length<4||s.userId.length>20)&&(a.userId="아이디는 4자 이상 20자 이하로 입력해주세요.",r=!1):(a.userId="아이디를 입력해주세요.",r=!1),s.password?s.password.length<8&&(a.password="비밀번호는 최소 8자 이상이어야 합니다.",r=!1):(a.password="비밀번호를 입력해주세요.",r=!1),s.password!==s.confirmPassword&&(a.confirmPassword="비밀번호가 일치하지 않습니다.",r=!1),s.username?s.username.length>50&&(a.username="사용자 이름은 50자를 초과할 수 없습니다.",r=!1):(a.username="사용자 이름을 입력해주세요.",r=!1),s.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)?s.email.length>100&&(a.email="이메일은 100자를 초과할 수 없습니다.",r=!1):(a.email="유효한 이메일 주소를 입력해주세요.",r=!1):(a.email="이메일을 입력해주세요.",r=!1),r},I=async()=>{if(!y()){l.value="입력값을 확인해주세요.",m.value=!1;return}g.value=!0,l.value="";try{(await k.post("/api/users",{userId:s.userId,password:s.password,username:s.username,email:s.email})).status===201&&(l.value="회원가입이 성공적으로 완료되었습니다! 로그인 페이지로 이동합니다.",m.value=!0,setTimeout(()=>{c.push("/login")},2e3))}catch(r){console.error("회원가입 실패:",r),m.value=!1,r.response?r.response.data&&r.response.data.message?l.value="회원가입 실패: "+r.response.data.message:r.response.status===409?l.value="회원가입 실패: 이미 존재하는 아이디 또는 이메일입니다.":r.response.status===400?(l.value="회원가입 실패: 유효하지 않은 입력값이 있습니다.",r.response.data.errors&&r.response.data.errors.forEach(e=>{a[e.field]&&(a[e.field]=e.defaultMessage)})):l.value="회원가입 실패: "+r.response.statusText:r.request?l.value="회원가입 실패: 서버 응답이 없습니다.":l.value="회원가입 실패: 요청을 보내는 중 오류가 발생했습니다."}finally{g.value=!1}};return(r,e)=>(n(),i("div",h,[e[10]||(e[10]=o("h2",null,"회원가입",-1)),o("form",{onSubmit:P(I,["prevent"]),class:"signup-form"},[o("div",V,[e[5]||(e[5]=o("label",{for:"userId"},"아이디",-1)),p(o("input",{type:"text",id:"userId","onUpdate:modelValue":e[0]||(e[0]=t=>s.userId=t),required:"",minlength:"4",maxlength:"20"},null,512),[[f,s.userId]]),a.userId?(n(),i("p",q,d(a.userId),1)):u("",!0)]),o("div",S,[e[6]||(e[6]=o("label",{for:"password"},"비밀번호",-1)),p(o("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=t=>s.password=t),required:"",minlength:"8"},null,512),[[f,s.password]]),a.password?(n(),i("p",U,d(a.password),1)):u("",!0)]),o("div",M,[e[7]||(e[7]=o("label",{for:"confirmPassword"},"비밀번호 확인",-1)),p(o("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[2]||(e[2]=t=>s.confirmPassword=t),required:""},null,512),[[f,s.confirmPassword]]),a.confirmPassword?(n(),i("p",B,d(a.confirmPassword),1)):u("",!0)]),o("div",E,[e[8]||(e[8]=o("label",{for:"username"},"사용자 이름",-1)),p(o("input",{type:"text",id:"username","onUpdate:modelValue":e[3]||(e[3]=t=>s.username=t),required:"",maxlength:"50"},null,512),[[f,s.username]]),a.username?(n(),i("p",R,d(a.username),1)):u("",!0)]),o("div",T,[e[9]||(e[9]=o("label",{for:"email"},"이메일",-1)),p(o("input",{type:"email",id:"email","onUpdate:modelValue":e[4]||(e[4]=t=>s.email=t),required:"",maxlength:"100"},null,512),[[f,s.email]]),a.email?(n(),i("p",C,d(a.email),1)):u("",!0)]),o("button",{type:"submit",disabled:g.value},"회원가입",8,D),l.value?(n(),i("p",{key:0,class:b([{success:m.value,error:!m.value},"signup-message"])},d(l.value),3)):u("",!0)],32)]))}},F=_(N,[["__scopeId","data-v-60da1d1d"]]);export{F as default};
