import{_ as V,l as h,r as p,d as n,e as o,j as m,v,x as g,t as c,q as y,B as q,h as _,i as M,o as i}from"./index-Cce2zJMP.js";const S={class:"signup-container"},U={class:"form-group"},C={class:"input-with-button"},B=["disabled"],E={key:0,class:"error-message"},A={class:"form-group"},D={key:0,class:"error-message"},F={class:"form-group"},R={key:0,class:"error-message"},j={class:"form-group"},N={key:0,class:"error-message"},T=["disabled"],z={__name:"RegisterPage",setup(O){const b=M(),a=h({userId:"",password:"",confirmPassword:"",username:""}),r=h({userId:"",password:"",confirmPassword:"",username:""}),w=p(!1),u=p(""),f=p(!1),I=p(!1),l=p(""),d=p(!1),k=()=>{let e=!0;return Object.keys(r).forEach(s=>r[s]=""),a.userId?(a.userId.length<4||a.userId.length>20)&&(r.userId="아이디는 4자 이상 20자 이하로 입력해주세요.",e=!1):(r.userId="아이디를 입력해주세요.",e=!1),a.password?a.password.length<8&&(r.password="비밀번호는 최소 8자 이상이어야 합니다.",e=!1):(r.password="비밀번호를 입력해주세요.",e=!1),a.password!==a.confirmPassword&&(r.confirmPassword="비밀번호가 일치하지 않습니다.",e=!1),a.username?a.username.length>50&&(r.username="사용자 이름은 50자를 초과할 수 없습니다.",e=!1):(r.username="사용자 이름을 입력해주세요.",e=!1),e},P=async()=>{if(r.userId="",l.value="",d.value=!1,!a.userId){r.userId="아이디를 입력해주세요.";return}if(a.userId.length<4||a.userId.length>20){r.userId="아이디는 4자 이상 20자 이하로 입력해주세요.";return}I.value=!0;try{const e=await _.get(`/api/users/check-userId?userId=${a.userId}`);e.data.success?(l.value=e.data.message,d.value=!0):(l.value=e.data.message,d.value=!1)}catch(e){console.error("아이디 중복 확인 실패:",e),l.value="아이디 확인 중 오류가 발생했습니다.",d.value=!1,e.response&&e.response.status===400&&e.response.data.data?(e.response.data.data.forEach(t=>{t.field==="userId"&&(r.userId=t.defaultMessage)}),l.value=""):e.response&&e.response.data&&e.response.data.message&&(l.value=e.response.data.message)}finally{I.value=!1}},x=async()=>{if(!k()){u.value="입력값을 확인해주세요.",f.value=!1;return}w.value=!0,u.value="",l.value="",d.value=!1;try{const e=await _.post("/api/users",{userId:a.userId,password:a.password,username:a.username});e.data.success?(u.value=e.data.message,f.value=!0,setTimeout(()=>{b.push("/login")},2e3)):(u.value=e.data.message||"회원가입에 실패했습니다.",f.value=!1)}catch(e){if(console.error("회원가입 실패:",e),f.value=!1,e.response){const s=e.response.data;u.value=s.message||"회원가입에 실패했습니다.",e.response.status===400&&s.data&&Array.isArray(s.data)?(s.data.forEach(t=>{r[t.field]&&(r[t.field]=t.defaultMessage)}),u.value="입력값을 확인해주세요."):e.response.status===409?(r.userId=s.message,u.value="회원가입 실패: "+s.message):s.message&&(u.value="회원가입 실패: "+s.message)}else e.request?u.value="회원가입 실패: 서버 응답이 없습니다. 네트워크 연결을 확인해주세요.":u.value="회원가입 실패: 요청을 보내는 중 오류가 발생했습니다."}finally{w.value=!1}};return(e,s)=>(i(),n("div",S,[s[8]||(s[8]=o("h2",null,"회원가입",-1)),o("form",{onSubmit:q(x,["prevent"]),class:"signup-form"},[o("div",U,[s[4]||(s[4]=o("label",{for:"userId"},"아이디",-1)),o("div",C,[v(o("input",{type:"text",id:"userId","onUpdate:modelValue":s[0]||(s[0]=t=>a.userId=t),required:"",minlength:"4",maxlength:"20"},null,512),[[g,a.userId]]),o("button",{type:"button",onClick:P,disabled:I.value},"중복 확인",8,B)]),r.userId?(i(),n("p",E,c(r.userId),1)):m("",!0),l.value?(i(),n("p",{key:1,class:y([{success:d.value,error:!d.value},"check-message"])},c(l.value),3)):m("",!0)]),o("div",A,[s[5]||(s[5]=o("label",{for:"password"},"비밀번호",-1)),v(o("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=t=>a.password=t),required:"",minlength:"8"},null,512),[[g,a.password]]),r.password?(i(),n("p",D,c(r.password),1)):m("",!0)]),o("div",F,[s[6]||(s[6]=o("label",{for:"confirmPassword"},"비밀번호 확인",-1)),v(o("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":s[2]||(s[2]=t=>a.confirmPassword=t),required:""},null,512),[[g,a.confirmPassword]]),r.confirmPassword?(i(),n("p",R,c(r.confirmPassword),1)):m("",!0)]),o("div",j,[s[7]||(s[7]=o("label",{for:"username"},"사용자 이름",-1)),v(o("input",{type:"text",id:"username","onUpdate:modelValue":s[3]||(s[3]=t=>a.username=t),required:"",maxlength:"50"},null,512),[[g,a.username]]),r.username?(i(),n("p",N,c(r.username),1)):m("",!0)]),o("button",{type:"submit",disabled:w.value},"회원가입",8,T),u.value?(i(),n("p",{key:0,class:y([{success:f.value,error:!f.value},"signup-message"])},c(u.value),3)):m("",!0)],32)]))}},G=V(z,[["__scopeId","data-v-dd260d4d"]]);export{G as default};
